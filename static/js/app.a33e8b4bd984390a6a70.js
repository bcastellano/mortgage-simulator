webpackJsonp([1],{"2YoV":function(t,e,a){var n=a("l0S2");n.keys().forEach(n)},"31ho":function(t,e,a){t.exports=a.p+"apple-touch-icon.png"},"6xNd":function(t,e){},"B/ia":function(t,e){},KGSN:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i={name:"App",data:function(){return{version:window.app_version}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("section",{staticClass:"hero is-primary is-bold"},[t._m(0),t._v(" "),a("div",{staticClass:"hero-foot"},[a("div",{staticClass:"container"},[a("nav",{staticClass:"tabs is-boxed"},[a("ul",[a("router-link",{attrs:{tag:"li",to:"/","exact-active-class":"is-active"}},[a("a",[t._v("dashboard")])]),t._v(" "),a("router-link",{attrs:{tag:"li",to:"/doc","exact-active-class":"is-active"}},[a("a",[t._v("documentation")])])],1),t._v(" "),a("div",{staticClass:"tags has-addons is-pulled-right"},[a("span",{staticClass:"tag is-dark"},[t._v("version")]),t._v(" "),a("span",{staticClass:"tag is-info"},[t._v("v"+t._s(t.version))])])])])])]),t._v(" "),a("div",{staticClass:"section"},[a("router-view")],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container"},[e("h1",{staticClass:"title"},[this._v("\n          Simulador de hipotecas\n        ")]),this._v(" "),e("h2",{staticClass:"subtitle"},[this._v("\n          Calcula como quedarán los intereses y cuadro de amortización de tu hipoteca\n        ")])])])}]};var o=a("VU/8")(i,r,!1,function(t){a("xdSm")},null,null).exports,l=a("/ocq"),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._v(" "),a("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),a("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),a("br"),t._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var c=a("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},s,!1,function(t){a("KGSN")},"data-v-cbf8847e",null).exports,u={props:{mData:{type:Object,required:!0}},data:function(){return{fee:0,amount:0,type:"2"}},methods:{removePartialAmortization:function(t){this.mData.partialAmortization.splice(t,1)},addPartialAmortization:function(){this.mData.partialAmortization.push({fee:this.fee,amount:this.amount,type:this.type})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box",attrs:{id:"form"}},[a("h3",{staticClass:"title is-4"},[t._v("Form")]),t._v(" "),a("section",[a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("b-field",{attrs:{label:"Capital"}},[a("b-input",{attrs:{placeholder:"Capital del préstamo",icon:"cash-multiple",required:"",type:"number",id:"capital"},model:{value:t.mData.capital,callback:function(e){t.$set(t.mData,"capital",t._n(e))},expression:"mData.capital"}})],1),t._v(" "),a("b-field",{attrs:{label:"Plazos"}},[a("b-input",{attrs:{placeholder:"Introduzce el número de años",icon:"calendar-range",required:"",type:"number",id:"installments"},model:{value:t.mData.installments,callback:function(e){t.$set(t.mData,"installments",t._n(e))},expression:"mData.installments"}})],1),t._v(" "),a("b-field",{attrs:{label:"Fecha inicio"}},[a("b-datepicker",{attrs:{id:"startDate",required:"",placeholder:"Introduzce fecha de primer pago",icon:"calendar-today"},model:{value:t.mData.startDate,callback:function(e){t.$set(t.mData,"startDate",e)},expression:"mData.startDate"}})],1)],1),t._v(" "),a("div",{staticClass:"column"},[a("b-field",{attrs:{label:"Tipo"}},[a("b-select",{attrs:{id:"mortgageType"},model:{value:t.mData.mortgageType,callback:function(e){t.$set(t.mData,"mortgageType",e)},expression:"mData.mortgageType"}},[a("option",{attrs:{disabled:"",value:""}},[t._v("Selecciona tipo de hipoteca")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("Variable")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("Fijo")])])],1),t._v(" "),1==t.mData.mortgageType?a("div",[a("b-field",{attrs:{label:"Diferencial"}},[a("b-input",{attrs:{placeholder:"Introduce el diferencial aplicado",icon:"percent",required:"",id:"differential"},model:{value:t.mData.differential,callback:function(e){t.$set(t.mData,"differential",t._n(e))},expression:"mData.differential"}})],1),t._v(" "),a("b-field",{attrs:{label:"Euribor"}},[a("b-input",{attrs:{placeholder:"Introduce el euribor aplicado",icon:"percent",required:"",id:"euribor"},model:{value:t.mData.euribor,callback:function(e){t.$set(t.mData,"euribor",t._n(e))},expression:"mData.euribor"}})],1)],1):t._e(),t._v(" "),2==t.mData.mortgageType?a("div",[a("b-field",{attrs:{label:"Tipo interés"}},[a("b-input",{attrs:{placeholder:"Introduce el tipo de interés",icon:"percent",required:"",id:"fixedRate"},model:{value:t.mData.fixedRate,callback:function(e){t.$set(t.mData,"fixedRate",t._n(e))},expression:"mData.fixedRate"}})],1)],1):t._e()],1),t._v(" "),a("div",{staticClass:"column"},[a("button",{attrs:{id:"partialAmortizationAdd"},on:{click:function(e){t.addPartialAmortization()}}},[t._v("add")]),t._v(" "),a("b-field",[a("b-input",{attrs:{placeholder:"fee",required:"",id:"partialAmortizationFee"},model:{value:t.fee,callback:function(e){t.fee=t._n(e)},expression:"fee"}})],1),t._v(" "),a("b-field",[a("b-input",{attrs:{placeholder:"amount",required:"",id:"partialAmortizationAmount"},model:{value:t.amount,callback:function(e){t.amount=t._n(e)},expression:"amount"}})],1),t._v(" "),a("b-field",[a("b-input",{attrs:{placeholder:"type",required:"",id:"partialAmortizationType"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),t._v(" "),a("b-table",{attrs:{data:t.mData.partialAmortization,striped:!0,narrowed:!0,hoverable:!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"fee",label:"Cuota",numeric:""}},[t._v("\n                "+t._s(e.row.fee)+"\n              ")]),t._v(" "),a("b-table-column",{attrs:{field:"amount",label:"Cantidad amortizada",numeric:""}},[t._v("\n                "+t._s(e.row.amount.toFixed(2))+"\n              ")]),t._v(" "),a("b-table-column",{attrs:{field:"type",label:"Tipo",numeric:""}},[t._v("\n                "+t._s(e.row.type)+"\n              ")]),t._v(" "),a("b-table-column",{attrs:{label:"acciones"}},[a("a",{on:{click:function(a){t.removePartialAmortization(e.index)}}},[t._v("eliminar")])])]}}])},[a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{icon:"currency-eur",size:"is-small"}})],1),t._v(" "),a("p",[t._v("Nothing here.")])])])])],2)],1)])])])},staticRenderFns:[]};var m=a("VU/8")(u,d,!1,function(t){a("g5Gw")},"data-v-40a39042",null).exports,v={props:{resultInitial:{type:Object,required:!0},resultFinal:{type:Object,required:!0}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"result-table"}},[a("div",{staticClass:"box"},[a("h3",{staticClass:"title is-4"},[t._v("Resultados:")]),t._v(" "),a("p",[t._v("Interés mensual: "),a("b",[t._v(t._s(t.resultInitial.monthlyRate.toFixed(6)))])]),t._v(" "),a("p",[t._v("Cuota inicial: "),a("b",[t._v(t._s(t.resultInitial.monthlyFee.toFixed(2)))])]),t._v(" "),a("p",[t._v("Fecha inicio: "),a("b",[t._v(t._s(t.resultInitial.startDate))])]),t._v(" "),a("p",[t._v("Fecha fin: "),a("b",[t._v(t._s(t.resultFinal.endDate))])]),t._v(" "),a("table",{staticClass:"table"},[t._m(0),t._v(" "),a("tbody",[a("tr",[a("th",[t._v("Numero de Cuotas:")]),t._v(" "),a("td",[t._v(t._s(t.resultInitial.totalFees))]),t._v(" "),a("td",[t._v(t._s(t.resultFinal.totalFees))]),t._v(" "),a("td",[t._v(t._s(t.resultInitial.totalFees-t.resultFinal.totalFees))])]),t._v(" "),a("tr",[a("th",[t._v("Total a pagar:")]),t._v(" "),a("td",[t._v(t._s(t.resultInitial.totalAmount.toFixed(2)))]),t._v(" "),a("td",[t._v(t._s(t.resultFinal.totalAmount.toFixed(2)))]),t._v(" "),a("td",[t._v(t._s(Math.abs(t.resultInitial.totalAmount-t.resultFinal.totalAmount).toFixed(2)))])]),t._v(" "),a("tr",[a("th",[t._v("Intereses:")]),t._v(" "),a("td",[t._v(t._s(t.resultInitial.interestAmount.toFixed(2)))]),t._v(" "),a("td",[t._v(t._s(t.resultFinal.interestAmount.toFixed(2)))]),t._v(" "),a("td",[t._v(t._s(Math.abs(t.resultInitial.interestAmount-t.resultFinal.interestAmount).toFixed(2)))])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th"),this._v(" "),e("th",[this._v("R.inicial")]),this._v(" "),e("th",[this._v("R.final")]),this._v(" "),e("th",[this._v("diff")])])])}]};var _=a("VU/8")(v,p,!1,function(t){a("B/ia")},"data-v-417162bc",null).exports,f={props:{tableData:{type:Array,required:!0}},methods:{getClass:function(t){return new Date(t)<Date.now()?"is-success":"is-danger"}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"amortization-table"}},[a("h3",{staticClass:"title is-4"},[t._v("Cuadro de amortización:")]),t._v(" "),a("b-table",{attrs:{data:t.tableData,striped:!0,narrowed:!0,hoverable:!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"index",label:"index",numeric:""}},[t._v("\n        "+t._s(e.row.index)+"\n      ")]),t._v(" "),a("b-table-column",{attrs:{field:"date",label:"Fecha",numeric:""}},[a("span",{class:"tag "+t.getClass(e.row.date)},[t._v("\n          "+t._s(e.row.date)+"\n        ")])]),t._v(" "),a("b-table-column",{attrs:{field:"year",label:"Año",numeric:""}},[t._v("\n        "+t._s(e.row.year)+"\n      ")]),t._v(" "),a("b-table-column",{attrs:{field:"month",label:"Mes",numeric:""}},[t._v("\n        "+t._s(e.row.month)+"\n      ")]),t._v(" "),a("b-table-column",{attrs:{field:"fee",label:"Cuota",numeric:""}},[t._v("\n        "+t._s(e.row.fee.toFixed(2))+"\n      ")]),t._v(" "),a("b-table-column",{attrs:{field:"interest",label:"Interés",numeric:""}},[t._v("\n        "+t._s(e.row.interest.toFixed(2))+"\n      ")]),t._v(" "),a("b-table-column",{attrs:{field:"amortizedAmount",label:"Capital amortizado",numeric:""}},[t._v("\n        "+t._s(e.row.amortizedAmount.toFixed(2))+"\n      ")]),t._v(" "),a("b-table-column",{attrs:{field:"pendingAmortizedAmount",label:"Capital pendiente",numeric:""}},[t._v("\n        "+t._s(e.row.pendingAmortizedAmount.toFixed(2))+"\n      ")]),t._v(" "),a("b-table-column",{attrs:{field:"pendingFee",label:"Cuotas pendientes",numeric:""}},[t._v("\n        "+t._s(e.row.pendingFee)+"\n      ")]),t._v(" "),a("b-table-column",{attrs:{field:"partialAmortizationAmount",label:"Amortización parcial",numeric:""}},[e.row.partialAmortizationAmount?a("span",[t._v(t._s(e.row.partialAmortizationAmount)+" - "+t._s(e.row.partialAmortizationType))]):t._e()])]}}])},[a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{icon:"currency-eur",size:"is-large"}})],1),t._v(" "),a("p",[t._v("Nothing here.")])])])])],2)],1)},staticRenderFns:[]};var b=a("VU/8")(f,h,!1,function(t){a("6xNd")},"data-v-3efe72a9",null).exports,g=a("BO1k"),A=a.n(g);function D(t,e,a,n,i){if(n||(n=0),i||(i=0),0===t)return-(a+n)/e;var r=Math.pow(1+t,e),o=t/(r-1)*-(a*r+n);return 1===i&&(o/=1+t),o}function x(t){var e=t.getMonth()+1;return e=e<10?"0"+e:""+e,t.getFullYear()+"-"+e+"-"+t.getDate()}var y=function(t){var e=function(t){var e="1"===t.mortgageType?(t.differential+t.euribor)/1200:t.fixedRate/1200,a=12*t.installments,n=D(e,a,-t.capital),i=a*n,r=i-t.capital,o=[],l=t.capital,s=0,c=0,u=0,d={},m=!0,v=!1,p=void 0;try{for(var _,f=A()(t.partialAmortization);!(m=(_=f.next()).done);m=!0){var h=_.value;d[h.fee]=h}}catch(t){v=!0,p=t}finally{try{!m&&f.return&&f.return()}finally{if(v)throw p}}for(var b,g,y,F,C=1,w=new Date(t.startDate),z=0;z<a;z++){var k={};if(w.setMonth(w.getMonth()+1),k.index=z,k.date=x(w),k.month=C,k.partialAmortizationAmount=0,d[k.month]&&(k.partialAmortizationAmount=d[k.month].amount,k.partialAmortizationType=d[k.month].type),k.year=Math.ceil(k.month/12),k.pendingFee=a-k.index-1,d[k.month]&&"2"===d[k.month].type){k.fee=u,k.interest=l*e,k.amortizedAmount=k.fee-k.interest+k.partialAmortizationAmount,l-=k.amortizedAmount,k.pendingAmortizedAmount=l;var I=Math.floor((b=e,g=-u,y=l,void 0===(F=void 0)&&(F=0),0===b?-(F+y)/g:Math.log((-F*b+g)/(g+b*y))/Math.log(1+b)))+1;z+=k.pendingFee-I,k.pendingFee=I}else k.fee=D(e,k.pendingFee+1,-l),k.interest=l*e,k.amortizedAmount=k.fee-k.interest+k.partialAmortizationAmount,l-=k.amortizedAmount,k.pendingAmortizedAmount=l;s+=k.fee+k.partialAmortizationAmount,c+=k.interest,o.push(k),u=k.fee,C++}var T=new Date(t.startDate),j=new Date(t.startDate);return j.setMonth(j.getMonth()+o.length),{result:{initial:{monthlyRate:e,monthlyFee:n,totalFees:a,totalAmount:i,interestAmount:r,startDate:x(T)},final:{totalFees:o.length,totalAmount:s,interestAmount:c,endDate:x(j)}},table:o}}(t);return{result:e.result,table:e.table}},F=a("mvHQ"),C=a.n(F),w={capital:0,installments:0,mortgageType:0,differential:0,euribor:0,fixedRate:0,partialAmortization:[],startDate:null};try{localStorage.mortgageData&&((w=JSON.parse(localStorage.mortgageData)).startDate=new Date(w.startDate))}catch(t){console.error("Data in localstorage corrupted")}var z=function(){return w},k=function(){localStorage.mortgageData=C()(w)},I={name:"Dashboard",components:{MortgageForm:m,MortgageResultTable:_,MortgageAmortizationTable:b},data:function(){return{mortgageData:z()}},computed:{calculatedData:function(){return y(this.mortgageData)}},watch:{mortgageData:{handler:function(t,e){k()},deep:!0}}},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container is-fluid"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-two-thirds"},[e("mortgage-form",{attrs:{"m-data":this.mortgageData}})],1),this._v(" "),e("div",{staticClass:"column"},[e("mortgage-result-table",{attrs:{"result-initial":this.calculatedData.result.initial,"result-final":this.calculatedData.result.final}})],1)]),this._v(" "),e("mortgage-amortization-table",{attrs:{"table-data":this.calculatedData.table}})],1)},staticRenderFns:[]};var j=a("VU/8")(I,T,!1,function(t){a("jTjw")},"data-v-8d43d9f4",null).exports;n.a.use(l.a);var S=new l.a({routes:[{path:"/doc",name:"HelloWorld",component:c},{path:"/",name:"Dashboard",component:j}]}),P=a("MMSg"),R=a.n(P),M=(a("doPI"),a("2YoV"),a("F2sf")),E=a.n(M),$=a("o7G7"),U=a.n($);if(n.a.use(R.a),n.a.config.productionTip=!1,"serviceWorker"in navigator){var q=E.a.register();U()(q,{onInstalled:function(){console.log("APP-SW ==> onInstalled")},onUpdateReady:function(){console.log("APP-SW ==> onUpdateReady")},onUpdating:function(){console.log("APP-SW ==> onUpdating")},onUpdateFailed:function(){console.log("APP-SW ==> onUpdateFailed")},onUpdated:function(){console.log("APP-SW ==> onUpdated")}})}else console.log("APP-SW ==> No service worker avalailable");new n.a({el:"#app",router:S,components:{App:o},template:"<App/>"})},doPI:function(t,e){},g5Gw:function(t,e){},jTjw:function(t,e){},l0S2:function(t,e,a){var n={"./apple-touch-icon.png":"31ho","./favicon-32x32.png":"x7E6","./favicon.ico":"yUjI"};function i(t){return a(r(t))}function r(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id="l0S2"},x7E6:function(t,e,a){t.exports=a.p+"favicon-32x32.png"},xdSm:function(t,e){},yUjI:function(t,e,a){t.exports=a.p+"favicon.ico"}},["NHnr"]);
//# sourceMappingURL=app.a33e8b4bd984390a6a70.js.map